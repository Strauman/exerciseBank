%% Source and documentation at https://github.com/Strauman/Handin-LaTeX
\ProvidesPackage{exbank}[2018/03/25 v0.01 Creates a setup that gives freedom in making sets and exercises.]  \@ifundefined{ownLineNoSpacesGotIt}{\@latex@warning{Compilation wont work unless \string\end{problem} and \string\end{solution} are on their own lines and without any spaces. This warning can be removed by doing \string\def\string\ownLineNoSpacesGotIt{} before \string\usepackage{exbank}}}{} \@ifundefined{exercisesDir}{\gdef\exercisesDir{exercises}}{}\global\let\incl = \input\usepackage{xstring}\usepackage{pgffor}\usepackage{scrextend}\usepackage{comment}\usepackage{calc}\pgfkeys{/exbanki18n/.is family, /exbanki18n, default/.style = {Problem = Problem, Solution = Solution}, Problem/.estore in = \@tr@Problem, Solution/.estore in = \@tr@Solution}\newcommand{\translateExBank}[1]{\pgfkeys{/exbanki18n, default, #1}}\translateExBank{}\gdef\@tr#1{\@ifundefined{@tr@#1}{#1}{\csname @tr@#1\endcsname}}\let\ea = \expandafter\def\removebs#1{\if#1\@backslashchar\else#1\fi}\newcommand{\At}[2]{\def\macname{\expandafter\removebs\detokenize{#1}}\let\mname = \macname\ifcsname At@\mname\endcsname\ea\g@addto@macro\csname At@\mname\endcsname{#2}\else \ea\def\csname At@\mname\endcsname{#2}\fi}\newcommand{\Trigger}[1]{\def\macname{\expandafter\removebs\detokenize{#1}}\let\mname = \macname\ifcsname At@\mname\endcsname\csname At@\mname\endcsname\fi}\long\def\about#1{}\def\ppLeading{4em}\def\pMarginBelow{1em}\def\pMarginAbove{1em}\def\pMarginLeft{-1.5em}\def\ppMargin{1em}\def\solMargin{\dimexpr\ppMargin+\ppMargin\relax}\def\vsSize{1em}\def\vs{\vspace{\vsSize}}\newcounter{problemcounter}\setcounter{problemcounter}{0}\newcounter{partproblemcounter} \At\VeryBeginProblem{\stepcounter{problemcounter}\setcounter{partproblemcounter}{1}\vspace*{\pMarginAbove}\begin{addmargin}{\pMarginLeft} {\normalfont\Large\bfseries\@tr{Problem}~\theproblemcounter}\end{addmargin}\vspace*{\pMarginBelow}} \At\BeginPartproblem{\vspace{\ppMargin}\begin{addmargin}{\ppMargin}\large\hspace*{-\ppMargin}\textbf{(\theproblemcounter\alph{partproblemcounter})}\normalsize\stepcounter{partproblemcounter}} \At\EndPartproblem{\hfill\end{addmargin}\vspace*{0.5em}} \At\BeginSolution{\vspace*{1em}\begin{addmargin}{\solMargin}\hspace*{-\solMargin}\large{\textbf{\@tr{Solution}:}}\normalsize} \At\EndSolution{\end{addmargin}\vspace*{1em}}\global\let\DisplaySolution\DisplaySolutiontrue \gdef\isFalse{0}\gdef\isTrue{1}\gdef\DisplayProblem{\isTrue}\gdef\@DisplaySolutions{\isFalse}\gdef\DisplaySolutions{\xdef\@DisplaySolutions{\isTrue}\@latex@warning{Showing solutions}} \AtBeginDocument{\if\@DisplaySolutions\isFalse \@latex@warning{Hiding solutions. Show them with \string\DisplaySolutions}\fi}\global\let\do@ProcessCutFile = \ProcessCutFile \generalcomment{problem}{\edef\DisplaySolution{\@DisplaySolutions} \Trigger\DecideProblemDisplay \begingroup\if\DisplayProblem\isFalse \def\ProcessCutFile{}\else \Trigger\BeginPartproblem \fi}{\if\DisplayProblem\isFalse\else \Trigger\EndPartproblem \fi\endgroup}\generalcomment{solution} {\Trigger\AtBeginSolutionHard \begingroup\if\@DisplaySolutions\isTrue \if\DisplayProblem\isFalse \xdef\DisplaySolution{\isFalse}\fi \fi\if\DisplaySolution\isTrue \Trigger\BeginSolution \else\def\ProcessCutFile{}\fi}{\if\DisplaySolution\isTrue \Trigger\EndSolution \fi \Trigger\EndSolutionHard \endgroup}\newenvironment{intro}{}{}\gdef\isin#1#2#3#4{\def\needle{#2}\def\haystack{#1}\def\isFalse{0}\let\isInList = \isFalse \IfInteger{\haystack}{\if\haystack\needle #3 \else #4 \fi}{\foreach\pp in #1{\if\pp\needle\gdef\isInList{1} #3 \fi}\if\isInList\isFalse #4 \fi}}\let\ea = \expandafter\newcounter{metacounter}\def\emptyList{-1}\begingroup\lccode`\|=`\\ \lowercase{\endgroup\def\removebs#1{\if#1|\else#1\fi}}\newcommand{\macroname}[1]{\expandafter\removebs\string#1}\gdef\ifppMode#1{\def\mname{\macroname{#1}}\if\mname\ppMode}\gdef\isppMode#1#2{\edef\mname{\macroname{#1}}\if{\macroname{#1}}\ppMode#2\fi}\gdef\@noneOfOne#1{}\gdef\@noneOfTwo#1#2{}\gdef\@ifppMode#1#2{\if{\macroname{#1}}\ppMode \expandafter\@secondoftwo \else\expandafter\@noneOfTwo \fi} \At\DecideProblemDisplay{\if\ppList\emptyList \xdef\DisplayProblem{\@ifppMode\exclude\isTrue\@ifppMode\select\isFalse}\else \isin{\ppList}{\themetacounter}{\xdef\DisplayProblem{\@ifppMode\exclude\isFalse\@ifppMode\select\isTrue}}{\xdef\DisplayProblem{\@ifppMode\exclude\isTrue\@ifppMode\select\isFalse}}\stepcounter{metacounter}\fi}\gdef\makeset#1#2{\ea\gdef\csname setlist@#1\endcsname{#2}}\newcommand{\redef}[3][{-1}]{\gdef\ppList{#1}\gdef\exerciseFile{#2}\gdef\ppMode{#3}}\newcommand{\exclude}[2]{[{#2}]{#1}{exclude}}\newcommand{\select}[2]{[{#2}]{#1}{select}}\gdef\buildex#1{\makeset{#1}{#1}\buildset{#1}}\gdef\buildset#1{\xdef\setName{#1} \@ifundefined{setlist@#1}{\@latex@error{Couldn't find set #1. Did you remember to do \string\makeset{#1}{}?}\stop}{}\edef\setlist{\csname setlist@#1\endcsname} \Trigger\StartBuildset \foreach\exerciseFileInfo in \setlist{\inspw\exerciseFileInfo \gdef\ppList{-1}\setcounter{metacounter}{1} \StrLeft{\exerciseFileInfo}{1}[\firstchar] \if[\firstchar\ea\redef\exerciseFileInfo\relax\else \redef{\exerciseFileInfo}{norm}\fi \Trigger\InputExercise \Trigger\BeginProblem \Trigger\VeryBeginProblem \incl{\exercisesDir/\exerciseFile} \Trigger\EndProblem \Trigger\EndInputExercise} \Trigger\EndBuildset}\newcommand\refcounter[1]{\edef\@currentlabel{#1}} \DeclareRobustCommand{\pplabel}[1]{\refcounter{\theproblemcounter}\label{pr:\exerciseFile:#1}\refcounter{\thepartproblemcounter}\label{pp:\exerciseFile:#1}}\let\pptag = \pplabel\newcommand\pppref[1]{(\ref{pp:\exerciseFile:#1})\relax}\newcommand\ppref[1]{\ref{pr:\exerciseFile:#1}\ref{pp:\exerciseFile:#1}\relax}\newcommand\pref[1]{\ref{pr:\exerciseFile:#1}\relax}  