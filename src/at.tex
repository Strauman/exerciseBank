%!TEX root = main.tex
\makeatletter
%% Adds macro to queue
\let\ea = \expandafter
\def\removebs#1{\if#1\@backslashchar\else#1\fi}
%% Usage: \At\BeginSomething (\BeginSomething) doesn't have to be defined
\newcommand{\At}[2]{
  \def\macname{\expandafter\removebs\detokenize{#1}}
  \let\mname = \macname
  \ifcsname At@\mname\endcsname
    \ea\g@addto@macro\csname At@\mname\endcsname{#2}
  \else
    \ea\gdef\csname At@\mname\endcsname{#2}
  \fi
}
%% Triggers queue generated by \At
%% Usage: \Trigger\BeginSomething (\BeginSomething) doesn't have to be defined
\newcommand{\Trigger}[1]{
  \def\macname{\expandafter\removebs\detokenize{#1}}
  \let\mname = \macname
  \@ifundefined{At@\mname}{}{\csname At@\mname\endcsname}
  % \ifcsname At@\mname\endcsname
  %   % \begingroup
  %   \makeatletter
  %   \csname At@\mname\endcsname
  %   \makeatother
  %   % \endgroup
  % \fi
}
\makeatother
